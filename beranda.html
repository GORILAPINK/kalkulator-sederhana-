<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ’– Aplikasi Keuangan Pink Cantik ðŸ’–</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&family=Dancing+Script&display=swap');

body {
    font-family: 'Poppins','Poppins';
    background: #ffe6f2;
    margin: 0; padding: 0;
    text-align: center;
    color: #333;
}
h1 {
    font-family: 'Pacifico', cursive;
    color: #e75480;
    font-size: 2.8em;
    margin: 20px 0;
}
.container {
    max-width: 900px;
    margin: auto;
    background: #fff;
    border-radius: 25px;
    padding: 25px;
    box-shadow: 0 8px 20px rgba(231,84,128,0.3);
}
#mulai-catatan {
    font-family:'Dancing Script', cursive;
    font-size:1.5em;
    color:#e75480;
    margin-bottom:15px;
    padding:10px 20px;
    display:inline-block;
    background:#ffe6f2;
    border-radius:20px;
    box-shadow:0 4px 10px rgba(231,84,128,0.3);
}
.saldo-box {
    background: #ffb6c1;
    color: #fff;
    font-size: 24px;
    font-weight: bold;
    padding: 15px 25px;
    border-radius: 20px;
    margin-bottom: 20px;
    display: inline-block;
    box-shadow: 0 4px 12px rgba(255,105,180,0.4);
}
form {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
}
input {
    padding: 12px 15px;
    border-radius: 12px;
    border: 1px solid #e75480;
    font-size: 16px;
    min-width: 150px;
}
button {
    padding: 12px 20px;
    border-radius: 12px;
    border: none;
    background: linear-gradient(45deg,#ff69b4,#e75480);
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
}
button:hover {
    transform: scale(1.05);
    background: linear-gradient(45deg,#e75480,#ff69b4);
}
#catatan {
    font-family: 'Dancing Script', cursive;
    font-size: 1.5em;
    color: #d63384;
    margin: 20px 0;
    padding: 10px 20px;
    display: inline-block;
    background: #ffe6f2;
    border-radius: 20px;
    box-shadow: 0 4px 10px rgba(231,84,128,0.3);
}
table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin-top: 10px;
    box-shadow: 0 4px 12px rgba(231,84,128,0.2);
    border-radius: 15px;
    overflow: hidden;
    background: #ffe6f2;
}
th, td {
    padding: 12px;
    text-align: center;
}
th {
    background: #ff69b4;
    color: #fff;
    font-size: 16px;
}
td[contenteditable="true"] {
    background: #ffd6e8;
    border-radius: 8px;
}
canvas {
    margin: 30px auto;
    display: block;
    max-width: 100%;
}
.btn-group {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 20px 0;
    flex-wrap: wrap;
}
footer {
    background: #ff69b4;
    color: #fff;
    padding: 15px;
    font-family: 'Pacifico', cursive;
    font-size: 18px;
    margin-top: 30px;
    border-radius: 15px 15px 0 0;
}
</style>
</head>
<body>
<div class="container">
<h1>ðŸ’– Sweet Wallet ðŸ’–</h1></br>

<div> 
  <div id="mulai-catatan">ðŸ’– Mulai kelola di sini saja sayangku ðŸ’–</div>  
</div>

<div>
    <div class="saldo-box" id="saldo-box">Saldo Keseluruhan: <span id="saldo">Rp 0</span></div>
</div>

<form id="form">
<input type="text" id="nama" placeholder="Nama" required>
<input type="number" id="jumlah" placeholder="Jumlah (Rp)" required>
<button type="button" onclick="tambah('pemasukan')">Tambah Pemasukan</button>
<button type="button" onclick="tambah('pengeluaran')">Tambah Pengeluaran</button>
</form>

<div id="catatan">âœ¨ Catatan keuangan akan muncul di sini âœ¨</div>

<table>
<thead>
<tr><th>Nama</th><th>Jumlah</th><th>Tipe</th><th>Aksi</th></tr>
</thead>
<tbody id="tabel-body"></tbody>
</table>

<canvas id="grafik" width="400" height="200"></canvas>

<div class="btn-group">
<button onclick="downloadPDF()">Download PDF</button>
<button onclick="downloadExcel()">Download Excel</button>
<button onclick="shareInstagram()">Bagikan ke Instagram</button>
<button onclick="shareWhatsApp()">Bagikan WhatsApp</button>
</div>
</div>

<footer>
ðŸ’– Aplikasi Keuangan Pink Cantik - Buat laporan keuanganmu lebih manis ðŸ’–
</footer>

<script>
let data=[]; 
let editingIndex=null;

const ctx=document.getElementById('grafik').getContext('2d');
let chart=new Chart(ctx,{
    type:'bar',
    data:{labels:["Pemasukan","Pengeluaran"],datasets:[{label:'Keuangan',data:[0,0],backgroundColor:["#ff69b4","#e75480"]}]},
    options:{plugins:{legend:{labels:{color:"#e75480"}}}, scales:{x:{ticks:{color:"#e75480"}}, y:{ticks:{color:"#e75480"}}}}
});

function tambah(tipe){
  const ket=document.getElementById('nama').value;
  const jum=parseInt(document.getElementById('jumlah').value);
  if(!ket || isNaN(jum)) return;
  data.push({ket,jum,tipe});
  document.getElementById('form').reset();
  update();
}

function update(){
  const body=document.getElementById('tabel-body'); body.innerHTML="";
  let pemasukan=0, pengeluaran=0;
  data.forEach((d,i)=>{
    if(d.tipe==="pemasukan") pemasukan+=d.jum; else pengeluaran+=d.jum;
    body.innerHTML+=`
    <tr>
    <td contenteditable="${editingIndex===i}" onblur="inlineEdit(${i},'ket',this.innerText)">${d.ket}</td>
    <td contenteditable="${editingIndex===i}" onblur="inlineEdit(${i},'jum',this.innerText)">Rp ${d.jum}</td>
    <td>${d.tipe}</td>
    <td>
    ${editingIndex===i?'<button onclick="saveEdit('+i+')">Simpan</button>':'<button onclick="startEdit('+i+')">Edit</button>'}
    <button onclick="hapusData(${i})">Hapus</button>
    </td>
    </tr>`;
  });

  const saldo=pemasukan-pengeluaran;
  document.getElementById('saldo').innerText=`Rp ${saldo} ${saldo>=0?'ðŸ’–':'ðŸ’”'}`;

  chart.data.datasets[0].data=[pemasukan,pengeluaran]; chart.update();

  let catatan="";
  if(pemasukan>pengeluaran) catatan="ðŸ’• lebih rajin dan Jangan lupa ditabung ya sayangku ðŸ’•";
  else if(pengeluaran>pemasukan) catatan="ðŸ’” boros banget cukup Lebih hemat ya sayangku ðŸ’”";
  else catatan="ðŸ’— okay pertahankan di larang banyak jajan ðŸ’—";
  document.getElementById('catatan').innerText=catatan;
}

function startEdit(i){ editingIndex=i; update(); }
function saveEdit(i){ editingIndex=null; update(); }
function inlineEdit(i,field,value){ if(field==='jum'){value=parseInt(value.replace(/[^0-9]/g,''))||0;} data[i][field]=value; update();}
function hapusData(i){ data.splice(i,1); update();}

function downloadPDF(){
  const { jsPDF } = window.jspdf; 
  const doc = new jsPDF(); 
  doc.setTextColor(231,84,128); 
  doc.text("Laporan Keuangan Pink ðŸ’–",20,20); 
  let y=30; 
  data.forEach(d=>{doc.text(`${d.ket} - Rp ${d.jum} (${d.tipe})`,20,y); y+=10;}); 
  doc.save("laporan.pdf");
}
function downloadExcel(){
  let ws=XLSX.utils.json_to_sheet(data); 
  let wb=XLSX.utils.book_new(); 
  XLSX.utils.book_append_sheet(wb,ws,"Laporan"); 
  XLSX.writeFile(wb,"laporan.xlsx");
}
function shareInstagram(){ alert("ðŸ“¸ Bagikan ke Instagram Story secara manual dengan upload screenshot ya sayangku ðŸ’•"); }
function shareWhatsApp(){
  let text="ðŸ’– Laporan Keuangan Pink Cantik ðŸ’–\n";
  data.forEach(d=>{text+=`${d.ket} - Rp ${d.jum} (${d.tipe})\n`;});
  let url="https://wa.me/?text="+encodeURIComponent(text);
  window.open(url,"_blank");
}

update();
</script>
</body>
</html>
